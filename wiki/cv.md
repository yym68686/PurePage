# 计算机视觉笔记

ReID 任务利用算法，在图像库中找到要搜索的目标的技术。

- **首次命中率（rank-1）**表示在候选库中得到与检索目标相似度排名最高的图片为目标行人的概率。 

- **平均精度均值（mAP，mean average precsion）**对于一些数据集来说，一张 probe 图像在 gallery 中可能有多张相匹配的图像，而 mAP 则是同时考虑了准确率和召回率，更能客观反映模型的性能。mAP可认为是PR曲线下的面积，即平均的查准率。

Cumulative Matching Characteristics (CMC) 是目前计算机视觉领域最流行的性能评估方法。

- Protocol-2

- adversarial gradients

DG-ReID 方法主要有两类。

- 域不变特征建模（Domain-invariant feature model-ing）
- 领域特定的特征建模（Domain-specific feature modeling）

**动态图：**其核心特点是计算图的构建和计算同时发生（Define by run）。

> **原理：** 类似Python解释器，在计算图中定义一个Tensor时，其值就已经被计算且确定了。
> **优点：** Pythonic语法，在调试模型时较为方便，能够实时得到中间结果的值。
> **缺点：** 由于所有节点都需要被保存，导致难以对整个[计算图](https://www.zhihu.com/search?q=计算图&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A"397481167"})进行优化。

**静态图**：将计算图的构建和实际计算分开（Define and run）。

> **原理：** 在构建阶段，根据完整的计算流程对原始的计算图进行优化和调整， 编译得到更省内存和计算量更少的计算图。编译之后图的结构不再改变，所以称之为 “静态图” 。 在计算阶段，根据输入数据执行编译好的计算图得到计算结果。
> **优点：** 静态图相比起动态图，对全局的信息掌握更丰富，可做的优化也会更多。
> **缺点：** 中间过程对于用户来说是个黑盒，无法像动态图一样实时拿到中间计算结果。

**动态图+Trace**

> 通过追溯输出（比如损失值、预测值）所依赖的网络结构，得到整体的计算图，再进行编译

**静态图+Eager**

> 直接迭代和直观调试，Eager模式下求解梯度与自定义训练

IBN 是指 Invertible Bottleneck Networks，即可逆瓶颈网络。它是一种深度学习模型，它通过使用可逆瓶颈层来提高模型的性能。可逆瓶颈层可以帮助模型在保留重要信息的同时减少冗余信息，从而提高模型的泛化能力。

## ResNet

训练集误差和测试集误差都高，不是过拟合，而是网络退化现象，ResNet 就是要解决深度增加带来的网络退化现象。

### ResNet 解决网络退化的机理

1. 深层梯度回传顺畅

恒等映射这一路的梯度是 1，把深层梯度注入底层，防止梯度消失。
没有中间商层层盘剥。

2. 类比其它机器学习模型

- 集成学习boosting，每一个弱分类器拟合“前面的模型与GT之差”
- 长短时记忆神经网络LSTM的遗忘门。
- Relu激活函数。

3. 传统线性结构网络难以拟合“恒等映射”

- 什么都不做有时很重要
- skip connection可以让模型自行选择要不要更新。
- 弥补了高度非线性造成的不可逆的信息损失。(MobileNet v2)

4. 网络加深，相邻像素回传回来的梯度相关性越来越低，最后接近白噪声。但相邻像素之间具有局部相关性，相邻像素的梯度也应该局部相关。相邻像素不相关的白噪声梯度只意味着随机扰动，并无拟合。ResNet 梯度相关性衰减从$\frac{1}{2^L}$增加为$\frac{1}{\sqrt{L}}$。保持了梯度相关性。（https://arxiv.org/abs/1702.08591）

## 